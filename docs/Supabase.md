# План интеграции Supabase в проект

## 1. Подключение Supabase
- Установить пакет `@supabase/supabase-js` (если не установлен)
- Создать клиент Supabase с использованием переменных окружения из `.env`

## 2. Создание клиента с преобразованием snake_case <-> camelCase
- Реализовать обёртку-клиент для Supabase, который будет автоматически преобразовывать данные:
  - Из camelCase (frontend) в snake_case (backend/Supabase)
  - Из snake_case (backend/Supabase) в camelCase (frontend)
- Вынести этот клиент в отдельный сервис, например, `src/services/supabaseClient.ts`

## 3. Авторизация пользователей
- Использовать встроенную авторизацию Supabase (email/password, OAuth и т.д.)
- Реализовать регистрацию, вход, выход, восстановление пароля
- Хранить токен пользователя в localStorage или sessionStorage
- Реализовать хук/контекст для работы с авторизацией (например, `useAuth`)

## 4. CRUD-операции для таблиц
- Реализовать сервисы/функции для работы с таблицами:
  - profiles
  - feeds
  - categories
  - products
  - ai_settings
  - feed_ai_settings
  - logs
- Все операции должны использовать клиент с преобразованием кейсов

## 5. Миграция данных с localStorage на Supabase
- При первом входе пользователя, если есть данные в localStorage, предложить импортировать их в Supabase
- После успешной миграции — очистить localStorage

## 6. Обработка ошибок и уведомления
- Реализовать обработку ошибок при работе с Supabase
- Показывать пользователю уведомления об ошибках и успешных действиях

## 7. Тестирование
- Покрыть основные сценарии интеграции тестами (unit/integration)

---

## Этапы реализации
1. **Настроить подключение к Supabase**
2. **Реализовать клиент с преобразованием кейсов**
3. **Добавить авторизацию и контекст пользователя**
4. **Реализовать CRUD для основных таблиц**
5. **Мигрировать данные с localStorage**
6. **Обработка ошибок и уведомления**
7. **Тестирование** 